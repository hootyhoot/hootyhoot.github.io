<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> nand2tetris | Mikhail Armanuel </title> <meta name="author" content="Mikhail Armanuel"> <meta name="description" content="building a computer from the ground up"> <meta name="keywords" content="academic-website, portfolio-website, computer-science, software-developer"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.png?f02556619ab2087c71f8c547cac47d66"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://hootyhoot.github.io/projects/nand2tetris/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Mikhail</span> Armanuel </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">nand2tetris</h1> <p class="post-description">building a computer from the ground up</p> </header> <article> <p>Maybe my favorite module during the first year was “Computer Fundamentals”. We used the popular nand2tetris course structure to “build a computer” starting from the most basic gates to a fully functioning computer (if you can call a calculator a fully functioning computer).</p> <p>The idea was simple, the teacher taught us the basics in class and <em>we</em> had to figure out how to piece it all together into the building blocks of a computer. But, we took the better part of 2 months to really get a hang of it, this is also where I tell you that this was a group project so this was by no means just my effort.</p> <hr> <p>We start with the basic gates written in nand2tetris’ own .hdl or hardware description language, which from what I guessed seemed to be a spin-off of Java or at the very least some form of OOP language</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CHIP ourAnd{
IN a,b;
OUT out;

PARTS:
ourChip(input1=a, input2=b, result=innerOutput);
Not(in=innerOutput, out=out);
}
</code></pre></div></div> <div class="caption"> Here is what an And gate looked like </div> <p>From there, we can build up larger and larger versions of these; 16 bit And, Not, Or, Mux, and so on. 16; because we are building a 16 bit computer. These allow us to build the heart of our CPU, the ALU or Arithmetic Logic Unit.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CHIP ourALU16 {
IN x[16], y[16], zx, zy, nx, ny, f, no, z[16];
OUT output[16];

PARTS:
Mux16(a=x, b=z, sel=zx, out=x1);
Mux16(a=y, b=z, sel=zy, out=y1);
Not16(in=x1, out=nx1);
Not16(in=y1, out=ny1);
Mux16(a=x1, b=nx1, sel=nx, out=x2);
Mux16(a=y1, b=ny1, sel=ny, out=y2);
And16(a=x2, b=y2, out=andxy);
Add16(a=x2, b=y2, out=addxy);
Mux16(a=andxy, b=addxy, sel=f, out=fxy);
Not16(in=fxy, out=nfxy);
Mux16(a=fxy, b=nfxy, sel=no, out=output);
}
</code></pre></div></div> <div class="row"> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/nand2tetris1-480.webp 480w,/assets/img/nand2tetris1-800.webp 800w,/assets/img/nand2tetris1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/nand2tetris1.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="ALU diagram" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-4 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/nand2tetris2-480.webp 480w,/assets/img/nand2tetris2-800.webp 800w,/assets/img/nand2tetris2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/nand2tetris2.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="ALU diagram" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Basically, what the ALU does is that for any two 16 bit inputs, to output either the negation, addition, subtraction, conjunction, or disjunction of them. From the diagram above we can see that the ALU has 6 control bits, changing the values of these control bits according to the truth table will output the desired operation.</p> <p>Next, come our memory chips. These consist of bits which are written as such:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CHIP ourBit {
IN in, load;
OUT out;

PARTS:
Mux(a=in, b=Previous, sel=load, out=temp);
DFF(in=temp, out=Previous, out=out);
}
</code></pre></div></div> <p>Combining 16 of bits gets us a 16 bit register. Combining 8 registers gets us a RAM8 chip, so on and so forth until we get a RAM16K chip which consists of 16 thousand registers, each 16 bits wide. Even the keyboard itself is just a small memory space that the user can edit.</p> <p>The final step is to combine the CPU, Memory, and ROM(using the built in one as it is a little out of our scope since it contains the machine code that allows us to boot into a GUI).</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CHIP Computer {
	IN reset;
	
	PARTS:
	
	// inM - Data input fetched from memory
	// instruction - Instruction input fetched from ROM
	// reset - Selector for PC register, resets pc value to 0 if selector is 1, does nothing if selector is 0
	// writeM - Signal to write to memory, write to memory if writeM==1, read from memory if writeM==0
	// outM - Data output from CPU to be fed into memory
	// addressM - Address of the memory to be accessed, to be fed into data register
	// pcOut - Address of the next instruction to be fetched from ROM, to be fed into ROM (instruction register)
	CPU (inM=memOut, instruction=instruction, reset=reset, writeM=writeM, outM=outM, addressM=addressM, pc=pcOut);
	
	// in - take the outM data
	// load - Signal to load data
	// address - Memory address
	// out - Output data
	Memory (in=outM, load=writeM, address=addressM, out=memOut);
	
	// address - Input address from the Program Counter
	// out - Output instruction
	ROM32K (address=pcOut, out=instruction);
}
</code></pre></div></div> <p>Et voila! There is our full fledged computer that can run assembly programs.</p> <p>Here we run a simple assembly program to add 2 and 3:</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/nand2tetris.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" autoplay="" controls="" loop=""></video> </figure> <div class="caption"> Note the end result in the D register and also RAM address 0. </div> </div> </div> <p>You might (definitely) be thinking; “All that work and we only added 2 numbers?”. The process of building itself was the goal in this project, to make you think of the actual work that a computer does while you read this very text. So the next time you sit down with nothing to do with computer, try to <strong>REALLY</strong> think of every bit that goes in and out and every instruction that happens inside your computer.</p> <hr> <p><strong>Disclaimer</strong>: I didn’t upload every piece of information and code that I have on this topic especially the ones related to the final coursework due to academic misconduct rules. If you want a much more in-depth look at this program structure go to <a href="https://www.nand2tetris.org" rel="external nofollow noopener" target="_blank">nand2tetris.org</a>.</p> <p>All credits to <a href="https://zhangruochi.com/Boolean-Arithmetic/2019/05/21/" rel="external nofollow noopener" target="_blank">Zhang Ruo Chi</a> and/or all original creators for the ALU diagram.</p> </article> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2024 Mikhail Armanuel. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>